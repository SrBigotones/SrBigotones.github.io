<head>
    <style>
        canvas {
            margin-left: auto;
            margin-right: auto;
            display: block;
        }
        table {
            display: inline-table;
        }
    </style>
</head>
<body style="background-color: grey;">
    <!--64x32 original size of screen CHIP8, 1 pixel == 10x10 on screen-->
    <canvas id="myCavas" width="640" height="320" style="background-color: black;"></canvas>
    <div>
        <input type="file" id="inputROM"/>
        <input type="button" id="btnRUN" value="RUN"/>
        <input type="button" id="btnStep" value="Step IN" />
        <input type="button" id="btnStop" value="STOP" />
        <table id="keyboardTable">
            <tr>
                <th><input id="kb1" type="button" value="1"></th>
                <th><input id="kb2" type="button" value="2"></th>
                <th><input id="kb3" type="button" value="3"></th>
                <th><input id="kbC" type="button" value="C"></th>
            </tr>
            <tr>
                <th><input id="kb4" type="button" value="4"></th>
                <th><input id="kb5" type="button" value="5"></th>
                <th><input id="kb6" type="button" value="6"></th>
                <th><input id="kbD" type="button" value="D"></th>
            </tr>
            <tr>
                <th><input id="kb7" type="button" value="7"></th>
                <th><input id="kb8" type="button" value="8"></th>
                <th><input id="kb9" type="button" value="9"></th>
                <th><input id="kbE" type="button" value="E"></th>
            </tr>
            <tr>
                <th><input id="kbA" type="button" value="A"></th>
                <th><input id="kb0" type="button" value="0"></th>
                <th><input id="kbB" type="button" value="B"></th>
                <th><input id="kbF" type="button" value="F"></th>
            </tr>
        </table>
        <table id="opTable" style="background-color: white;">
            <!-- <tr>
                <th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th><th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr>
            <tr>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
                <th>00</th>
            </tr> -->
        </table>
        <table id="regTable" style="background-color: blueviolet;">
            <tr>
                <th id="tablePC">PC:</th>
                <th id="tableI">I:</th>
            </tr>
            <tr>
                <th id="tableV0">V0:</th>
            </tr>
            <tr>
                <th id="tableV1">V1:</th>
            </tr>
            <tr>
                <th id="tableV2">V2:</th>
            </tr>
            <tr>
                <th id="tableV3">V3:</th>
            </tr>
            <tr>
                <th id="tableV4">V4:</th>
            </tr>
            <tr>
                <th id="tableV5">V5:</th>
            </tr>
            <tr>
                <th id="tableV6">V6:</th>
            </tr>
            <tr>
                <th id="tableV7">V7:</th>
            </tr>
            <tr>
                <th id="tableV8">V8:</th>
            </tr>
            <tr>
                <th id="tableV9">V9:</th>
            </tr>
            <tr>
                <th id="tableVA">VA:</th>
            </tr>
            <tr>
                <th id="tableVB">VB:</th>
            </tr>
            <tr>
                <th id="tableVC">VC:</th>
            </tr>
            <tr>
                <th id="tableVD">VD:</th>
            </tr>
            <tr>
                <th id="tableVE">VE:</th>
            </tr>
            <tr>
                <th id="tableVF">VF:</th>
            </tr>
            </tr>
        </table>
        
        
        
    </div>

    <script>
        var stopNOW = false
        const canvas = document.getElementById("myCavas")
        const ctx = canvas.getContext("2d");
        const inputElement = document.getElementById("inputROM")
        const btnRUN = document.getElementById("btnRUN")
        const btnStep = document.getElementById("btnStep")
        const btnStop = document.getElementById("btnStop")
        
        inputElement.files[0]
        var audioContext
        inputElement.addEventListener("change", (e) => {
            const selectedFile = e.target.files[0]
            audioContext = new AudioContext()
            openfile();
        })

        btnRUN.addEventListener("click", (e)=>{
            if(!inputElement.files[0]){
                alert("Program not loaded!")
            }else
            {
                stopNOW = false
                startME()
            }
        })
        btnStep.addEventListener("click", (e) => {
                if (!inputElement.files[0]) {
                    alert("Program not loaded!")
                } else {
                    instructionPerDraw = 1
                    stopNOW=true
                    runOne()
                }
            })

        btnStop.addEventListener("click", (e) => {
                stopNOW = true
            })

    </script>
    <script src="/script.js"></script>
    <script>
        setEvents()
        writeRAMtbl(200)
    </script>
</body>
